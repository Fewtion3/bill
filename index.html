<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏¥‡∏•‡∏´‡∏≠‡∏û‡∏±‡∏Å‡∏û‡∏∏‡∏ó‡∏ò‡∏£‡∏±‡∏Å‡∏©‡∏≤</title>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: url('399256514_1018582459584603_151014574961731545_n.jpg') no-repeat center center fixed;
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
    }

    .gui-container {
      background: rgba(255, 255, 255, 1);
      padding: 40px 60px;
      border-radius: 20px;
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.1);
      text-align: center;
      max-width: 600px;
      width: 100%;
      color: #333;
      overflow-y: auto;
      max-height: 95vh;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: #2575fc;
      font-weight: 700;
    }

    p.description {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      color: #555;
    }

    .button-container, .small-button-container {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .price-button {
      background: linear-gradient(135deg, #6a11cb, #2575fc);
      border: none;
      border-radius: 12px;
      color: white;
      padding: 15px 30px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 8px 15px rgba(37, 117, 252, 0.3);
      transition: all 0.3s ease;
    }

    .price-button:hover {
      background: linear-gradient(135deg, #2575fc, #6a11cb);
      transform: translateY(-3px);
    }

    .small-button {
      background-color: #2575fc;
      border: none;
      border-radius: 8px;
      color: white;
      padding: 10px 20px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 6px 12px rgba(37, 117, 252, 0.4);
      transition: background-color 0.3s ease, transform 0.3s ease;
    }

    .small-button:hover {
      background-color: #1a54b8;
      transform: translateY(-2px);
    }

    #bill-form {
      display: none;
      text-align: left;
      margin-top: 20px;
    }

    #bill-form input {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    #bills-display {
      text-align: left;
      margin-top: 20px;
      display: none;
      max-height: 300px;
      overflow-y: auto;
      border-top: 1px solid #ccc;
      padding-top: 10px;
    }

    .bill-item {
      background: #f3f6ff;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      position: relative;
    }

    .bill-buttons {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 10px;
    }

    .clear-button {
      margin-top: 10px;
      text-align: right;
    }
  </style>
</head>
<body>
  <div class="gui-container">
    <h1>‡∏£‡∏∞‡∏ö‡∏ö ‡∏ö‡∏¥‡∏•‡∏´‡∏≠‡∏û‡∏±‡∏Å‡∏û‡∏∏‡∏ó‡∏ò‡∏£‡∏±‡∏Å‡∏©‡∏≤</h1>
    <p class="description">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πà‡∏≤ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</p>

    <div class="button-container">
      <button type="button" class="price-button" onclick="filterByRent(1600)">‡∏£‡∏≤‡∏Ñ‡∏≤ 1600 ‡∏ö‡∏≤‡∏ó</button>
      <button type="button" class="price-button" onclick="filterByRent(1800)">‡∏£‡∏≤‡∏Ñ‡∏≤ 1800 ‡∏ö‡∏≤‡∏ó</button>
      <button type="button" class="price-button" onclick="filterByRent(2000)">‡∏£‡∏≤‡∏Ñ‡∏≤ 2000 ‡∏ö‡∏≤‡∏ó</button>
      <button type="button" class="price-button" onclick="filterByRent(2200)">‡∏£‡∏≤‡∏Ñ‡∏≤ 2200 ‡∏ö‡∏≤‡∏ó</button>
      <button type="button" class="price-button" onclick="filterByRent(2500)">‡∏£‡∏≤‡∏Ñ‡∏≤ 2500 ‡∏ö‡∏≤‡∏ó</button>
      <button type="button" class="price-button" onclick="filterByRent(3000)">‡∏£‡∏≤‡∏Ñ‡∏≤ 3000 ‡∏ö‡∏≤‡∏ó</button>
      <button type="button" class="price-button" onclick="filterByRent(3500)">‡∏£‡∏≤‡∏Ñ‡∏≤ 3500 ‡∏ö‡∏≤‡∏ó</button>
    </div>

    <div class="small-button-container">
      <button type="button" class="small-button" onclick="showForm()">‡∏Å‡∏£‡∏≠‡∏Å‡∏ö‡∏¥‡∏•‡∏´‡∏≠‡∏û‡∏±‡∏Å</button>
      <button type="button" class="small-button" onclick="showBills()">‡∏î‡∏π‡∏ö‡∏¥‡∏•‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</button>
      <button type="button" class="small-button" onclick="compareElectricity()">‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü</button>
    </div>

    <form id="bill-form" onsubmit="saveBill(event)">
      <input type="text" id="room" placeholder="‡∏´‡πâ‡∏≠‡∏á" required />
      <input type="text" id="tenant" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤" required />
      <input type="number" id="rent" placeholder="‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏´‡πâ‡∏≠‡∏á (‡∏ö‡∏≤‡∏ó)" required />
      <input type="number" id="electric" placeholder="‡πÉ‡∏ä‡πâ‡πÑ‡∏ü (‡∏´‡∏ô‡πà‡∏ß‡∏¢)" required />
      <input type="number" id="cleaning" placeholder="‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î" required />
      <input type="number" id="other" placeholder="‡∏Ñ‡πà‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ" required />
      <button type="submit" class="small-button">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏¥‡∏•</button>
    </form>

    <div id="bills-display"></div>
  </div>

  <script>
    function showForm() {
      document.getElementById("bill-form").style.display = "block";
      document.getElementById("bills-display").style.display = "none";
    }

    function showBills() {
      displayBills();
    }

    function filterByRent(price) {
      displayBills(price);
    }

    function displayBills(filterPrice = null) {
      document.getElementById("bill-form").style.display = "none";
      const display = document.getElementById("bills-display");
      display.innerHTML = '';
      const bills = JSON.parse(localStorage.getItem("bills") || "[]");

      const filteredBills = filterPrice !== null
        ? bills.filter(b => parseFloat(b.rent) === price)
        : bills;

      if (filteredBills.length === 0) {
        display.innerHTML = "<p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ö‡∏¥‡∏•</p>";
      } else {
        filteredBills.forEach((bill, index) => {
          const total = (
            parseFloat(bill.rent) +
            100 +
            bill.electric * 8 +
            parseFloat(bill.cleaning) +
            parseFloat(bill.other)
          ).toFixed(2);

          const html = `
            <div class="bill-item" id="bill-${index}">
                <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div>
                        <h2 style="margin: 0; color: #2575fc;">‡∏´‡∏≠‡∏û‡∏±‡∏Å‡∏û‡∏∏‡∏ó‡∏ò‡∏£‡∏±‡∏Å‡∏©‡∏≤</h2>
                        <strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${bill.date}<br/>
                    </div>
                    <div style="text-align: right; font-size: 0.85rem;">
                        23 ‡∏´‡∏°‡∏π‡πà 9 ‡∏ö‡πâ‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏à‡∏£‡∏¥‡∏ç ‡∏ï. ‡∏ò‡∏≤‡∏ï‡∏∏ ‡∏≠. ‡∏ß‡∏≤‡∏£‡∏¥‡∏ô‡∏ä‡∏≥‡∏£‡∏≤‡∏ö ‡∏à. ‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ 34190<br/>
                        ‡πÇ‡∏ó‡∏£. 0865825196<br/>
                        ID Line: pitchysu
                    </div>
                </div>
                <hr/>
              <strong>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤:</strong> ${bill.tenant}<br/>
              <strong>‡∏´‡πâ‡∏≠‡∏á:</strong> ${bill.room}<br/>
              <strong>‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤:</strong> ${bill.rent} ‡∏ö‡∏≤‡∏ó<br/>
              <strong>‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥:</strong> 100 ‡∏ö‡∏≤‡∏ó<br/>
              <strong>‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü (${bill.electric} ‡∏´‡∏ô‡πà‡∏ß‡∏¢):</strong> ${bill.electric * 8} ‡∏ö‡∏≤‡∏ó<br/>
              <strong>‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î:</strong> ${bill.cleaning} ‡∏ö‡∏≤‡∏ó<br/>
              <strong>‡∏Ñ‡πà‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ:</strong> ${bill.other} ‡∏ö‡∏≤‡∏ó<br/>
              <strong>‡∏£‡∏ß‡∏°:</strong> ${total} ‡∏ö‡∏≤‡∏ó
              
              <div style="margin-top: 10px; font-size: 0.85rem; color: #555;">
                <em>
                    ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 5 ‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô<br/>
                    ‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 5 ‡∏õ‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 20 ‡∏ö‡∏≤‡∏ó<br/>
                    ‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 15 ‡∏õ‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 50 ‡∏ö‡∏≤‡∏ó<br/>
                    ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏õ‡∏£‡∏î‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ ‡∏ò. ‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢ ‡∏™‡∏≤‡∏Ç‡∏≤ ‡πÇ‡∏•‡∏ï‡∏±‡∏™‡∏ß‡∏≤‡∏£‡∏¥‡∏ô‡∏ä‡∏≥‡∏£‡∏≤‡∏ö<br/>
                    ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 393-0-37364-5 ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ ‡∏ô‡∏≤‡∏á‡∏û‡∏¥‡∏ä‡∏ç‡∏≤‡∏†‡∏£‡∏ì‡πå ‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡∏Å‡∏π‡∏è
                </em>
            </div>

              <div class="bill-buttons">
                <button class="small-button" onclick="saveAsImage('bill-${index}')">üì∏ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ</button>
                <button class="small-button" onclick="deleteBill(${index})">üóëÔ∏è ‡∏•‡∏ö‡∏ö‡∏¥‡∏•‡∏ô‡∏µ‡πâ</button>
              </div>
            </div>
          `;
          display.innerHTML += html;
        });

        display.innerHTML += `
          <div class="clear-button">
            <button class="small-button" onclick="clearBills()">‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
          </div>
        `;
      }

      display.style.display = "block";
    }

    function saveBill(event) {
      event.preventDefault();
      const today = new Date();
      const formattedDate = today.toLocaleDateString('th-TH');
      const bill = {
        room: document.getElementById("room").value,
        tenant: document.getElementById("tenant").value,
        rent: parseFloat(document.getElementById("rent").value),
        electric: parseFloat(document.getElementById("electric").value),
        cleaning: parseFloat(document.getElementById("cleaning").value),
        other: parseFloat(document.getElementById("other").value),
        date: formattedDate
      };

      const bills = JSON.parse(localStorage.getItem("bills") || "[]");
      bills.push(bill);
      localStorage.setItem("bills", JSON.stringify(bills));

      alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏¥‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
      document.getElementById("bill-form").reset();
      document.getElementById("bill-form").style.display = "none";
    }

    function clearBills() {
      if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")) {
        localStorage.removeItem("bills");
        alert("‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß");
        displayBills();
      }
    }

    function deleteBill(index) {
      const bills = JSON.parse(localStorage.getItem("bills") || "[]");
      if (confirm("‡∏•‡∏ö‡∏ö‡∏¥‡∏•‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
        bills.splice(index, 1);
        localStorage.setItem("bills", JSON.stringify(bills));
        displayBills();
      }
    }

    function saveAsImage(id) {
      const element = document.getElementById(id);
      html2canvas(element).then(canvas => {
        const link = document.createElement("a");
        link.download = `${id}.png`;
        link.href = canvas.toDataURL();
        link.click();
      });
    }

    function compareElectricity() {
      document.getElementById("bill-form").style.display = "none";
      const display = document.getElementById("bills-display");
      display.innerHTML = '';
      const bills = JSON.parse(localStorage.getItem("bills") || "[]");

      if (bills.length < 2) {
        display.innerHTML = "<p>‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ö‡∏¥‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</p>";
        display.style.display = "block";
        return;
      }

      const roomGroups = {};
      bills.forEach(bill => {
        if (!roomGroups[bill.room]) {
          roomGroups[bill.room] = [];
        }
        roomGroups[bill.room].push(bill);
      });

      let html = "<h3>‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏¥‡∏•)</h3>";
      let hasComparison = false;

      for (const room in roomGroups) {
        const group = roomGroups[room];
        if (group.length < 2) continue;

        hasComparison = true;
        html += `<h4>‡∏´‡πâ‡∏≠‡∏á ${room}</h4><ul>`;
        group.forEach(bill => {
          const electricCost = bill.electric * 8;
          html += `<li>
            <strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${bill.date} | 
            <strong>‡πÉ‡∏ä‡πâ‡πÑ‡∏ü:</strong> ${bill.electric} ‡∏´‡∏ô‡πà‡∏ß‡∏¢ | 
            <strong>‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü:</strong> ${electricCost} ‡∏ö‡∏≤‡∏ó
          </li>`;
        });
        html += `</ul>`;
      }

      if (!hasComparison) {
        html += "<p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏¥‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</p>";
      }

      display.innerHTML = html;
      display.style.display = "block";
    }
  </script>
</body>
</html>